# If an operator is matched, best preference
sp {action*best*preference*operator*matched
   (state <s> ^problem-space.name action
              ^operator <o> +
              ^match-action.matched <o>)
-->
   (<s> ^operator <o> >)
}

# If an evaluate-operator is matched, best preference
sp {action*best*preference*evaluate-operator*matched
   (state <s> ^problem-space.name action
              ^match-action.matched <eval-op>
              ^operator <o> +)
   (<o> ^name evaluate-operator
        ^superoperator <eval-op>)
-->
   (<s> ^operator <o> >)
}

## If an operator isn't matched, reject it
#sp {action*reject*non-matched*operators
#   (state <s> ^problem-space.name action
#              ^operator <o> +
#              ^match-action <ma>)
#   (<o> ^action-proposal true)
#   (<ma> -^matched <o>)
#-->
#   (<s> ^operator <o> -)
#}

## If it is a subaction, give it a best preference
#sp {action*subaction*best*preference
#   (state <s> ^problem-space.name action
#             -^problem-space.learning.type retrospective
#              ^operator <o> +)
#   (<o> ^subaction-handle <sub-handle>
#        ^perform once)
#-->
#   (<s> ^operator <o> > =)
#}
#
#sp {action*composite-action*reject*actions*if*missing-desired
#   (state <s> ^problem-space <ps>
#              ^missing-desired true
#              ^operator <o> +)
#   (<ps> ^name action
#         ^action.action-type composite)
#   (<o> ^name <> create-desired)
#-->
#   (<s> ^operator <o> -)
#}
#
#sp {action*composite-action*reject*actions*if*unproposed-subaction
#   (state <s> ^problem-space <ps>
#              ^unproposed-subaction true
#              ^operator <o> +)
#   (<ps> ^name action
#         ^action.action-type composite)
#   (<o> ^name <> learn-task-subaction)
#-->
#   (<s> ^operator <o> -)
#}
#

sp {action*composite-action*reject*perform*once*subaction*if*performed
   (state <s> ^problem-space <ps>
              ^operator <o> +
              ^action-operator.performed <sub-handle>)
   (<ps> ^name action
         ^action.action-type composite)
   (<o> ^subaction-handle <sub-handle>
        ^perform once)
-->
   (<s> ^operator <o> -)
}

sp {action*execute*composite*reject*all*operators*if*no*desired
  (state <s> ^problem-space <ps>
             ^action-id.goal
            -^desired
            ^operator <o> +)
  (<ps> ^name action
        ^action.type execute
        ^action.action-type composite)
-->
  (<s> ^operator <o> -)
}


sp {action*prefer*report-failure*bad-arguments*over*unknown-goal
  (state <s> ^problem-space.name action
              ^operator <o1> +
              ^operator <o2> +)
  (<o1> ^name << report-failure-multiple-arguments report-failure-missing-argument >> )
  (<o2> ^name report-failure-unknown-goal)
-->
  (<s> ^operator <o1> > <o2>)
}
